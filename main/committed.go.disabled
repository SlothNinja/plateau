package main

import (
	"github.com/gin-gonic/gin"
)

const (
	committedKind  = "Committed"
	viewKind       = "View"
	cachedRootKind = "CachedRoot"
)

func (cl Client) getCommitted(ctx *gin.Context) (game, error) {
	cl.Log.Debugf(msgEnter)
	defer cl.Log.Debugf(msgExit)

	id := getID(ctx)
	snap, err := cl.CommittedDocRef(id).Get(ctx)
	if err != nil {
		return game{}, err
	}

	var g game
	if err := snap.DataTo(&g); err != nil {
		return game{}, err
	}

	g.ID = id
	return g, nil
}
